<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="google-site-verification" content="nP5Df-TYNWX_nGB7Qum5d5I4cXzd3E7A2TXtZ0Y2x_Q" />
    <title>aTz || Largest online B2B marketplace </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="<?php echo base_url(); ?>assets/admin/images/favicon.ico" type="image/x-icon">
    <title> aTz || Largest online B2B marketplace </title>
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/front/css/bootstrap.min.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/front/css/font-awesome.min.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/front/css/ionicons.min.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/front/css/all-comman.css">
    <link rel="stylesheet" href="<?php echo base_url(); ?>assets/front/css/bundle.css">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-144123824-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      gtag('config', 'UA-144123824-1');
    </script>
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window,document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
       fbq('init', '318941032348543'); 
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" 
        src="https://www.facebook.com/tr?id=318941032348543&ev=PageView
        &noscript=1"/>
    </noscript>
    <!-- End Facebook Pixel Code -->
    <!-- Global site tag (gtag.js) - Google Ads: 728750276 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-728750276"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      gtag('config', 'AW-728750276');
    </script>
    <style>
      .price{
      font-weight: 500 !important;
      font-size: 13px !important;
      color: #000000ad !important;
      }
      .biz-action-bar-button{
      background-color: #bd081b !important;
      }
      body {
      background-color: #F7F8FA
      }
      .draft {
      padding: 20px;
      max-width: 1200px;
      min-width: 700px;
      background-color: #F7F8FA;
      margin: auto
      }
      .draft .next-icon-help:before,
      .draft .next-icon-success:before {
      color: #1DC11D
      }
      .draft .next-form-item {
      margin-bottom: 12px
      }
      .draft .draft-taBlock {
      border: 1px solid #FFB380
      }
      .draft .draft-productsAmountBlock {
      display: -ms-flexbox;
      display: flex;
      -ms-flex-align: end;
      align-items: flex-end;
      -ms-flex-direction: column;
      flex-direction: column
      }
      .next-form-item-control {
      line-height: 28px
      }
      .next-form-item-control .next-btn-text.next-btn-medium {
      margin: 0
      }
      .remarkContent_1 .next-form-item-control,
      .remarkInput_1 .next-form-item-control {
      width: 100%
      }
      .remarkContent_1 .next-form-item-control .next-input,
      .remarkInput_1 .next-form-item-control .next-input {
      width: 100%
      }
      .biz-block-card-wrap {
      margin: 0 0 20px;
      padding-bottom: 20px
      }
      .bg-color{
      background-color: unset !important;
      }
      .product .pic{
      width: 30% !important;
      }
      .wd100{
      width: 100% !important;
      }
      .font-13{
      font-size: 13px !important;
      }
      #loading {
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      position: fixed;
      display: block;              
      background-color: rgba(0,0,0,0.4);
      z-index: 99;
      text-align: center;
      }
      #loading-image {
      position: absolute;
      top: 185px;
      left:20%;
      z-index: 99999;
      }
      .modal-dialog {
      width: 360px;
      }
      .modal-header {
      background-color: #337AB7;
      padding:16px 16px;
      color:#FFF;
      border-bottom:2px dashed #337AB7;
      }
      
      input[type=radio],
      input.radio {
      float: left;
      clear: none;
      margin: 2px 0 0 2px;
      }
      .maincard {
      /*box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .16), 0 2px 10px 0 rgba(0, 0, 0, .12);*/
      border: 0;
      font-weight: 400;
      }
      .amount
      {
      box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .16), 0 2px 10px 0 rgba(0, 0, 0, .12);
      }
      .payment_option .card_main
      {
      color:#fff;       
      }
      .payment_option .card-header h5 
      {
      background:none;
      }
      .payment_option .card_main span
      {
      color:#000; 
      font-weight:600;
      font-size:16px;      
      }
      .payment_option .card-body
      {
      padding:0px !important;
      }
      .credit input{
      border-radius:0px;
      height:40px;
      }
      .btn {
      box-shadow: 0 2px 5px 0 rgba(0,0,0,.16), 0 2px 10px 0 rgba(0,0,0,.12);
      padding: .4rem 2.14rem;
      color:#fff;
      font-size:1.3rem;
      transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
      border: 0;
      border-radius: .125rem;
      cursor: pointer;
      text-transform: uppercase;
      white-space: normal;
      word-wrap: break-word;
      color: #fff;
      }
      .maincard1{
      border: 0 !important;
      }
      .maincard1 .card-header {
      border-top: 1px solid rgba(0,0,0,.1) !important;
      border-radius: 0 !important;
      background:#fff !important;
      border-bottom:0px !important;
      }
      .payamt{margin: 1rem !important;
      box-shadow: 0px 1px 13px #ccc;
      border: 0px solid;
      background: #fff;}
      
      #loading{
      width:100%;
      height:100%;
      position:fixed;
      z-index:9999;
      background-size:35%; 
      }
      #loading-image
      {
      position: absolute;
      left: 50%;
      -webkit-transform: translateX(-50%);
      transform: translateX(-50%)
      }
      .display_none
      {
          display:none;
      }
.address1{
    padding: 10px;
    margin-left: .946667rem;
}
.contact-person{
  font-weight: 700;
}
.company1 {
    display: block;
    height: .96rem;
    line-height: .96rem;
    background: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-left: 53px;
    margin: 5px;
}


.product-info{
  padding-bottom: 10px;
}

.label{
  margin-left: 3.7rem;
}

.border1
{
border-top:1px solid  #dee2e6;
margin-bottom: 3px;
}

hr {
    box-sizing: content-box;
    height: 0 !important;
    margin:4px !important;

}

#PayButtonDiv{
  position: fixed;
  bottom: 0px;
  text-align: center;
  width: 100%;
}


.mext-btn-fixed-primary {
    color: #FFF;
    background-color: #bd081b;
    border-color: #bd081b;
}
.mext-btn-fixed {
    width: 100%;
    display: block;
    border: 0;
    border-style: solid;
    height: 3rem!important;
    font-size: 17px;
    padding: 0 .533333rem;
    border-top-width: 1px;
}
    </style>
  </head>

  <body style="background:#fff !important;">
    <div id="loading" class="my-auto" style="display:none;">
      <img id="loading-image" class="mx-auto" src="<?php echo base_url();?>assets/front/images/loader1.gif" alt="Loading..." style="width:230px;" />
    </div>

    <nav class="navbar fixed-top" style="background:#fff;box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .16), 0 2px 10px 0 rgba(0, 0, 0, .12);">
      <div class="container ">  
        <a class="navbar-brand" href="<?php echo base_url(); ?>"><img src="<?php echo base_url(); ?>assets/admin/images/logo.png" width="130">
        </a>
      </div>
    </nav>
    <!--div for payment methods-->
    <div id="final_payment_section" style="margin-top:50px">
    <main class="pt-3">
      <div class="">
      <div id="loading" class="my-auto" style="display:none;">
        <img id="loading-image" class="my-auto" src="<?php echo base_url(); ?>assets/front/images/loader1.gif" alt="Loading..." style="width:230px;" />
      </div>
      <form action="" nonvalidate method="post" name="customerData" id="customerData" class="credit" id="paymentForm">
        <!--Grid row-->
        <div class="row">
          <div class="col-md-12 p-0">
            <div class="card-body p-0">
              <div class="">
              <div class="card-header card_main forum-card-img-30 d-flex justify-content-between">
                    <span class="p-0 m-0" style="color: #000; font-weight: 600; font-size: 16px;"> Amount Details  </span>
              </div>
                <div class="payamt">
                  <!--Top Table UI card1-->   
                  <?php 
                    foreach($productsinfos as $productinfo){
                       $order_amount+=$productinfo->final_price; 
                    }   
                    ?>
                  <div class="card-container" >
                  <div class="row">
                    <table class="table text-center">
                      <tr class="table-light">
                        <th><strong>Order Amount:</strong></th>
                        <td> <span id="payment-button-amount">
                          <strong><i class='fa fa-inr'></i></strong> <?php echo number_format($order_amount, 2); ?></span> 
                        </td>
                      </tr>
                      <tr class="table-light">
                        <th> <strong>Shipping Amount:</strong></th>
                        <td> <span id="payment-button-amount">
                         
                         <?php if($shipping_type=="Free" && $order_amount>=$free_amount)
                            {
                             echo "<span class='text-success'>Free</span>";
                            }else{
                                echo "<strong><i class='fa fa-inr'></i></strong>";
                                echo number_format($order_dtail['shipping_cost'],2);
                            }
                        ?> 
                        </td>
                      </tr>
                    </table>
                    <hr class="divider" style="margin: 50px 0!important;">
                    <div class="text-center col-12">
                      <strong>Payable Amount</strong>
                      <h4 class="text-center font-weight-bold my-2">
                        <span id="payment-button-amount">
                        <strong><i class='fa fa-inr'></i></strong> <?php echo number_format($order_dtail['order_price'], 2); ?>
                        </span>	
                      </h4>
                      <br>
                      <input type="hidden" name="order_price" id="order_price" value="<?php echo number_format($order_dtail['order_price'], 2); ?>"/>
                    </div>
                  </div>
                </div>
              </div>
     
               <div class="card-header card_main forum-card-img-30 d-flex justify-content-between">
                    <span class="p-0 m-0" style="color: #000; font-weight: 600; font-size: 16px;"> Product Details  </span>
                  </div>

                <div class="payamt">
                  <div class="line" style="height:1.746667rem; padding: 10px;"><i class="icon ion-ios-location"></i></i>
                     <span
                        class="contact-person"><?php echo $user_address->contact_person; ?></span> <span class="mobile"><?php echo $user_address->contact_number; ?></span>
                  </div>
                  <div class="address address1"><?php echo $user_address->street; ?> <?php echo $user_address->city; ?> <?php echo $user_address->state; ?> <?php echo $user_address->name; ?>-<?php echo $user_address->postcode ;?></div>

                  <div class="card-container" >
                    <div class="border1 pt-2">
                        
                     <?php foreach($productsinfos as $productsinfo): ?>
                     <div class="product  ">
                         <div class="col-4">
                         <img class="" src="<?php echo $productsinfo->images->url; ?>">
                         </div>
                         <div class="col-8 pl-0 ml-0">
                          <div class=""><strong><?php echo $seller_info['company_name']; ?></strong></div>
                        <div class="product-info">
                           <div class=""><?php echo $productsinfo->products_name; ?>
                           </div>
                            <div class="mt-1">
                                <?php 
                                $specSec=$productsinfo->prod_decode->specifications[0]->specifications->secondary;
                                $specPri=$productsinfo->prod_decode->specifications[0]->specifications->primary;
                                if(!empty($specSec[0]->specification_name)){?>
                                <span class="label1">
                                    <strong><?php echo $specSec[0]->specification_name; ?> : </strong>
                                </span>
                                 <?php 
                                       foreach($specSec as $spec){
                                            echo str_replace("_"," ",$spec->spec_value." (".$spec->quantity.")").",<br/>";
                                        }
                                 ?>
                                <?php } ?>
                            </div>
                            <div>
                               <?php if(!empty($specPri->specification_name)){?>
                                <span class="label1">
                                    <strong><?php echo $specPri->specification_name; ?> : </strong>
                                </span>
                                 <?php echo $specPri->spec_value; ?>
                                <?php }?>
                                
                            </div>
                        <div>
                            <span class="label1">
                                <strong>Unit :&nbsp;</strong>
                            </span>
                            <i class="fa fa-inr"></i>
                                <?php echo $productsinfo->products_price; ?>
                                <?php echo $productsinfo->units->units_name; ?>
                         </div>
                        <div>
                            <span class="label1">
                               <strong>Quantity :&nbsp;</strong>
                            </span>
                            <?php echo $productsinfo->products_quantity; ?>
                            <?php echo $productsinfo->units->units_name; ?>
                         </div>
                          <div>
                            <span class="label1">
                               <strong>Amount: </strong>
                            </span>
                            <i class="fa fa-inr"></i>
                            <?php echo $productsinfo->final_price; ?>
                         </div>
                        </div>
                      </div>
                     </div>
                     <hr/>
                     <div class="util-clearfix"></div>
                     <?php $total_quantity+=$productsinfo->products_quantity;?>
                     <?php $total_price+=$productsinfo->final_price;?>
                     <?php endforeach; ?>
                    
                     <span id="error_msg" ></span>
                  </div>
                </div>
              </div>
                
              <!--Accordion wrapper-->
              <!--  Use Wallet Amount-->
              <div class="col-md-12 p-0 payWalletDiv">
                <div class="question-card payment_option card maincard">
                  <div class="card-header card_main forum-card-img-30 d-flex justify-content-between">
                    <div class="custom-control custom-radio">
                      <input type="checkbox" class="custom-control-input payWallet" id="checkid" name="wallet_option" value=""> <i class="icon ion-ios-bookmarks text-danger" style="font-size:20px;"></i>
                      <label style="padding-top:5px;" class="custom-control-label" for="checkid"> 
                      <span>  Use Wallet </span> </label>
                    </div>
                    <span class="float-right" style="margin-top: 3px;" id="show_wallet_amount"> <?php echo $bal->balance  ?></span>
                    <input type="hidden" name="wallet_balance" id="wallet_balance"/>
                    <p id="p_error" style="text-align:center;color:red;"></p>
                  </div>
                </div>
              </div>
              <br>		   
              <!-- End Use Of Wallet Amount-->
              <!--Grid column-->
              <div class="col-md-12 p-0">
                <!-- pending -->
                <!--Card: Main question-->
                <div class="question-card payment_option card mb-4 maincard">
                  <!-- Card header -->
                  <div class="card-header card_main forum-card-img-30 d-flex justify-content-between">
                    <span class="p-0 m-0"> Payment Options  </span>
                  </div>
                  <input type="hidden" name="tid" id="tid" readonly />      
                  <input type="hidden" name="merchant_id" value="224525"/>
                  <input type="hidden" name="order_id" value="<?php echo $merchant_order_id ?>"/>
                  <input type="hidden" name="amount" id="amount" value="<?php echo $total/100; ?>" />
                  <input type="hidden" name="currency" value="INR"/>
                  <input type="hidden" name="redirect_url" value="<?php echo base_url() . 'm/home/success' ?>"/>
                  <input type="hidden" name="cancel_url" value="<?php echo base_url() . 'm/home/failed' ?>"/>
                  <input type="hidden" name="language" value="EN"/>             
                  <input type="hidden" name="billing_name" value="<?php echo $order_dtail['user_name']; ?>"/>
                  <input type="hidden" name="billing_address" value="<?php echo $order_dtail['user_street_address']; ?>"/>
                  <input type="hidden" name="billing_city" value="<?php echo $order_dtail['user_city']; ?>"/>
                  <input type="hidden" name="billing_state" value="<?php echo $order_dtail['user_state']; ?>"/>
                  <input type="hidden" name="billing_zip" value="<?php echo $order_dtail['user_postcode']; ?>"/>
                  <input type="hidden" name="billing_country" value="<?php echo $order_dtail['country_name']; ?>"/>
                  <input type="hidden" name="billing_tel" value="<?php echo $order_dtail['user_telephone']; ?>"/>
                  <input type="hidden" name="billing_email" value="<?php echo $order_dtail['user_email_address']; ?>"/>
                  <input type="hidden" name="delivery_name" value="<?php echo $order_dtail['delivery_name']; ?>"/>
                  <input type="hidden" name="delivery_address" value="<?php echo $order_dtail['delivery_street_address']; ?>"/>
                  <input type="hidden" name="delivery_city" value="<?php echo $order_dtail['delivery_city']; ?>"/>
                  <input type="hidden" name="delivery_state" value="<?php echo $order_dtail['delivery_state']; ?>"/>
                  <input type="hidden" name="delivery_zip" value="<?php echo $order_dtail['delivery_postcode']; ?>"/>
                  <input type="hidden" name="delivery_country" value="<?php echo $order_dtail['country_name']; ?>"/>
                  <input type="hidden" name="delivery_tel" value="<?php echo $order_dtail['user_telephone']; ?>"/>
                  <input type="hidden" name="total_qty" value="<?php echo $order_dtail['products_quantity'] ?>"/>
                  <input type="hidden" name="shipping_amt" value="<?php echo $order_dtail['shipping_cost'] ?>"/>
                  <input type="hidden" name="total_order_amount" id="total_order_amount" value="<?php echo $total/100 ; ?>"/>
                  <input type="hidden" name="merchant_param1" value="UDF1"/>
                  <input type="hidden" id="card_type" name="card_type" value="" readonly="readonly"/>
                  <input type="hidden" name="payment_name" id="payment_name">
                  <!-- Two Hidden Field Create For Remove Product From Cart-->
                   <input type="hidden" name="cart_pro_arr" value="<?php echo $cart_implode_arr; ?>"/>
                   <input type="hidden" name="cart_user_id" value="<?php echo $cart_user_id; ?>"/>
                  <!--Card content-->
                  <div class="payamt">
                    <div class="card-body">
                    <!--Accordion wrapper-->
                    <div class="accordion md-accordion accordion-blocks" id="accordionEx78" role="tablist" aria-multiselectable="true">
                      <!-- Accordion card -->
                      <!--credit card -->
                      <div class="card maincard1 ">
                        <!-- Card header -->
                        <div class="card-header p-3" role="tab" id="headingUnfiled">
                          <div data-toggle="collapse" data-parent="#accordionEx78" href="#collapseUnfiled" aria-expanded="true"
                            aria-controls="collapseUnfiled">
                            <h5 class="mt-1 mb-0">
                              <span>
                                <!-- Group of material radios - option 1 -->
                                <div class="custom-control custom-radio">
                                  <!-- <input type="radio" class="custom-control-input payOption radio_btn" id="defaultGroupExamplecredit" required name="payment_option" value="OPTCRDC"> -->
                                  <input type="radio" class="custom-control-input payOption radio_btn" id="defaultGroupExamplecredit" name="payment_option" value="">

                                  <label class="custom-control-label" for="defaultGroupExamplecredit">Credit Card</label>
                                </div>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <!-- Card body -->    
                      </div>
                      <!-- Accordion card -->
                      <!--debit card -->
                      <div class="card maincard1 ">
                        <!-- Card header -->
                        <div class="card-header" role="tab" id="heading79">
                          <!--Options-->
                          <!-- Heading -->
                          <div data-toggle="collapse" data-parent="#accordionEx78" href="#collapse79" aria-expanded="true"
                            aria-controls="collapse79">
                            <h5 class="mt-1 mb-0">
                              <span>
                                <!-- Group of material radios - option 1 -->
                                <!-- Default unchecked -->
                                <div class="custom-control custom-radio">
                                  <!-- <input type="radio" class="custom-control-input payOption 
                                    radio_btn" id="defaultGroupExamplecredit1" required name="payment_option" value="OPTDBCRD"> -->
                                     <input type="radio" class="custom-control-input payOption radio_btn" id="defaultGroupExamplecredit1" name="payment_option" value="" >
                                  <label class="custom-control-label" for="defaultGroupExamplecredit1">Debit Card</label>
                                </div>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <!-- Card body -->
                      </div>
                      <!-- Accordion card -->
                      <div class="card maincard1">
                        <!-- Card header -->
                        <div class="card-header" role="tab" id="heading80">
                          <!--Options-->
                          <!-- Heading -->
                          <div data-toggle="collapse" data-parent="#accordionEx78" href="#collapse85" aria-expanded="true"
                            aria-controls="collapse85">
                            <h5 class="mt-1 mb-0">
                              <span>
                                <!-- Group of material radios - option 1 -->
                                <!-- Default unchecked -->
                                <div class="custom-control custom-radio">
                                 <!--  <input type="radio" class="custom-control-input payOption radio_btn" id="defaultUnchecked2" name="payment_option" required value="OPTNBK"> -->

                                  <input type="radio" class="custom-control-input payOption radio_btn" id="defaultUnchecked2" name="payment_option" value="" >
                                  <label class="custom-control-label" for="defaultUnchecked2">Net Banking</label>
                                </div>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <!-- Card body -->
                      </div>
                      <!-- Accordion card -->
                      <!-- Accordion card -->
                      <div class="card maincard1" style="display:none">
                        <!-- Card header -->
                        <div class="card-header" role="tab" id="heading">
                          <!--Options-->
                          <!-- Heading -->
                          <div data-toggle="collapse" data-parent="#accordionEx78" href="#collapse81" aria-expanded="true" aria-controls="collapse81">
                            <h5 class="mt-1 mb-0">
                              <span>
                                <!-- Group of material radios - option 1 -->         
                                <div class="custom-control custom-radio">
                                  <input type="radio" class="custom-control-input payOption radio_btn" id="defaultUnchecked3" required name="payment_option" value="OPTEMI">
                                  <label class="custom-control-label" for="defaultUnchecked3">
                                  EMI (Easy Installments)</label>
                                </div>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <!-- Card body -->
                        <div id="collapse81" class="collapse  cardP" role="tabpanel" aria-labelledby="heading"
                          data-parent="#accordionEx78" style="display:none">
                          <div class="card-body">
                            <!--Top Table UI-->
                            <div class="bs-example px-4 py-5">
                              &nbsp;
                              <div class="accordion" id="accordionExample">
                                <div class="">
                                  <div class="" id="headingOne" style="display:none;">
                                    <h2 class="mb-0">
                                      <button type="button"  class=" btn-danger " data-toggle="collapse" data-target="#collapseOne">
                                      <i class="fa fa-plus"></i>&nbsp; No Cost EMI <small>Applicable on 2 products in your order</small></button>                                 
                                    </h2>
                                  </div>
                                  <div id="emi_div" style="display: none">
                                    <table border="1" width="100%">
                                      <tr>
                                        <td colspan="2">
                                          <center>EMI Section</center>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td> Emi plan id: </td>
                                        <td><input readonly="readonly" type="text" id="emi_plan_id"  name="emi_plan_id" value=""/> </td>
                                      </tr>
                                      <tr>
                                        <td> Emi tenure id: </td>
                                        <td><input readonly="readonly" type="text" id="emi_tenure_id" name="emi_tenure_id" value=""/>  </td>
                                      </tr>
                                      <tr>
                                        <td>Pay Through</td>
                                        <td>
                                          <select name="emi_banks"  id="emi_banks">
                                          </select>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td colspan="2">
                                          <div id="emi_duration" class="span12">
                                            <span class="span12 content-text emiDetails">
                                              <center>EMI Duration</center>
                                            </span>
                                            <table id="emi_tbl" border="1" width="100%">
                                            </table>
                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td id="processing_fee" colspan="2">
                                        </td>
                                      </tr>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Accordion card -->
                      <!-- Accordion card -->
                      <div class="card maincard1" style="">
                        <!-- Card header -->
                        <div class="card-header display_none" role="tab" id="heading">
                          <!--Options-->
                          <!-- Heading -->
                          <div data-toggle="collapse" data-parent="#accordionEx78" href="#collapse82" aria-expanded="true"
                            aria-controls="collapse82">
                            <h5 class="mt-1 mb-0">
                              <span>
                                <!-- Group of material radios - option 1 -->
                                <!-- Default unchecked -->
                                <div class="custom-control custom-radio">
                                  <input type="radio" class="custom-control-input payOption radio_btn" id="defaultUnchecked5" name="payment_option" onclick="razorpaySubmit(this);" value="razorpay" >
                                  <label class="custom-control-label" for="defaultUnchecked5"> Other </label>
                                </div>
                              </span>
                            </h5>
                          </div>
                        </div>
                        <!-- Card body -->
                        <div id="collapse82" class="collapse " role="tabpanel" aria-labelledby="heading"
                          data-parent="#accordionEx78" style="display:none">
                          <div class="card-body">
                            <!--Top Table UI-->
                            <div class="m-4">
                              <h5 class="mt-1 mb-0">
                                <!-- Group of material radios - option 1 -->
                                <!-- Default unchecked -->
                                <div class="custom-control custom-radio">
                                  <input type="radio" class="custom-control-input payOption" id="defaultUnchecked" name="payment_option" onclick="razorpaySubmit(this);">
                                  <label class="custom-control-label" for="defaultUnchecked"> Razorpay </label>
                                </div>
                              </h5>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  </div>
                  <br>
                  <!--end content--->
                 <!--  <div class="col my-2" id="PayButtonDiv" style="">
                    <button class="blockButton2 next-btn next-btn-primary next-btn-large biz-action-bar-button submit" id="paymentO" type="button">Pay Now: <i class='fa fa-inr'></i> <span id="total_order_price"></span></button>
                  </div> -->

              <div class="mext-btn-group mext-btn-group-block" id="PayButtonDiv">
                      <button  class="mext-btn mext-btn-fixed mext-btn-fixed-primary submit" id="paymentO" type="button" >Pay Now &nbsp;<i class='fa fa-inr'></i>&nbsp;<span id="total_order_price"></span></button>
              </div>
      </form>
      <!---razor payment gateway--->
      <?php if($pending_order=='Accepted') { ?>
      <form name="razorpay-form" id="razorpay-form" action="<?php echo $return_url; ?>" method="POST">
      <input type="hidden" name="razorpay_payment_id" id="razorpay_payment_id" />
      <input type="hidden" name="merchant_order_id" id="merchant_order_id" value="<?php echo $merchant_order_id; ?>"/>
      <input type="hidden" name="merchant_trans_id" id="merchant_trans_id" value="<?php echo $txnid; ?>"/>
      <input type="hidden" name="merchant_product_info_id" id="merchant_product_info_id" value="<?php echo $productinfo; ?>"/>
      <input type="hidden" name="merchant_surl_id" id="merchant_surl_id" value="<?php echo $surl; ?>"/>
      <input type="hidden" name="merchant_furl_id" id="merchant_furl_id" value="<?php echo $furl; ?>"/>
      <input type="hidden" name="card_holder_name_id" id="card_holder_name_id" value="<?php echo $card_holder_name; ?>"/>
      <input type="hidden" name="merchant_total" id="merchant_total" value="<?php echo $total; ?>"/>
      <input type="hidden" class="custom-control-input " id="checkid1" name="wallet_option1" value=""> 
      <!-- Two Hidden Field Create For Remove Product From Cart-->
        <input type="hidden" name="cart_pro_arr" value="<?php echo $cart_implode_arr; ?>"/>
        <input type="hidden" name="cart_user_id" value="<?php echo $cart_user_id; ?>"/>
      </form>
      <?php } ?>
      </div>
      <!--/.Accordion wrapper-->
      <!-- Comments -->
      </div>
      </div>
      <!--Grid row-->		  
      </div>  
      <!--container row-->
    </main>
    </div>
    <!--payment div -->
    <script type="text/javascript" src="<?php echo base_url(); ?>assets/mobile/js/jquery-3.2.1.min.js"></script> 
    <script type="text/javascript" src="<?php echo base_url(); ?>assets/mobile/js/popper.min.js"></script> 
    <script type="text/javascript" src="<?php echo base_url(); ?>assets/mobile/js/bootstrap.min.js"></script> 
    <script src="<?php echo base_url('assets/mobile/mobile/jquery.creditCardValidator.js') ?>"></script>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="<?php echo base_url('assets/mobile/mobile/jquery.inputmask.bundle.js') ?>"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <!--    <script src="<?php echo base_url('assets/mobile/mobile/payment.js') ?>"></script> -->
    <script>
      $(document).ready(function(){
          $("#proceed_order").click(function(){
              $('#loading').show();
          })
      })
      $(document).ready(function () {
        $("#seller_details").hide();
      
      });
      function show_details()
      {
        $("#seller_details").show();
      }
      
      function hide_details()
      {
        $("#seller_details").hide();
      }
      
 
      var razorpay_submit_btn, razorpay_instance;
      
      function razorpaySubmit(el) {
        /**
         * Before calling razor pay we check 
         * wheather the user has been banned by admin or not 
         * iff yes(true) then don't let them shopping
         * logout of the system by redirecting
         * @param pass nothing we will check it from session
         */
        $(document).ready(function () {
            $.post('<?php echo base_url('userorder/checkBeforePay') ?>', {name: "John", time: "2pm"})
                    .done(function (isBanned) {
                        if (isBanned == 0) {
                            alert('Your account has been banned. Please contact support!');
                            window.location.href = "<?php echo base_url('login'); ?>";
                            exit();
                        }
      
                    });
        });

        /*
          The array parameter are passed to razorpay payment gateway
        */

         var razorpay_options = {
              key: "<?php echo $key_id; ?>",
              amount: $('#merchant_total').val(),
              name: "<?php echo $name; ?>",
              description: "Order # <?php echo $merchant_order_id; ?>",
              netbanking: true,
              currency: "<?php echo $currency_code; ?>",
              callback_url:"<?php echo base_url() . 'm/product/callback'; ?>",
              // redirect : true,
              //order_id: "<?php echo $merchant_order_id; ?>",
              prefill: {
                  name: "<?php echo $card_holder_name; ?>",
                  email: "<?php echo $email; ?>",
                  contact: "<?php echo $phone; ?>",
              },
              notes: {
                  soolegal_order_id: "<?php echo $merchant_order_id; ?>",
              },
              handler: function (transaction) {
          
                  document.getElementById('razorpay_payment_id').value = transaction.razorpay_payment_id;
                  document.getElementById('razorpay-form').submit();
                  $('#loading').show();
              },
              "modal": {
                  "ondismiss": function () {
                      location.reload()
                  }
              }
          };

        if (typeof Razorpay == 'undefined') {
            setTimeout(razorpaySubmit, 200);
            if (!razorpay_submit_btn && el) {
                razorpay_submit_btn = el;
                el.disabled = true;
                el.value = 'Please wait...';
            }
        } else {
            if (!razorpay_instance) {
                razorpay_instance = new Razorpay(razorpay_options);
                if (razorpay_submit_btn) {
                    razorpay_submit_btn.disabled = false;
                    razorpay_submit_btn.value = "Pay Now";
                }
            }
            razorpay_instance.open();
        }
      }
      
      $(document).ready(function(e){
      $("#checkid1").val('unchecked');
      // $('input[type=radio]:checked').prop('checked', false).checkboxradio("refresh");
      
       $(".payWallet").val('unchecked');
       $(".payWallet").prop("checked", false);
       $(".payWallet").val('');
           
       /*
        This function set unique tid on page load event for payment parameter
       */
       window.onload = function() {
            var d = new Date().getTime();
            document.getElementById("tid").value = d;
            
        };
        
        /*
          This function return Onclick Radio button set value to checked or unchecked
        */

        $("input[type=radio]").on("click", function (e) {
    
           $(this).val(this.checked ? "checked" : "unchecked");
            // $(".radio_btn").attr('required', false);
        });

       
          /*
            @author Ishwar
            This function calculate start payment using wallet and without wallet option .
          */
     
      var wallet_amt = <?php echo $bal->balance??0; ?>;
      var total_amt=<?php echo $order_dtail['order_price']; ?>;
      var total_amt1=<?php echo $total/100 ?>;    
      
      /*
        @author Ishwar
        This Function Check radio button validation before Payment
       */
        $(".submit").on("click",function(e){
            
            if ($('input[name="payment_option"]:checked').length == 0)
            {
               alert("Please select at Least one Payment Options to make Payment !");
               // location.reload();
                return false;
            }
            
           if(wallet_amt>total_amt)
          {
           
                if($("#checkid").val()=='checked')
                {
                        $(".radio_btn").prop('disabled',false);  
                        $(".radio_btn").prop("checked", true);
                        $('#loading').show();

                      var formAction = '<?php echo base_url(); ?>m/home/payment_process';
                      //set form action
                      $('#customerData').attr('action', formAction);
                      //submit form
                      $('#customerData').submit();

                }
               else
               {
                     // do something
                    razorpaySubmit(this); 
                    return true;
               }

            
          }
          else
          {
               // do something
                razorpaySubmit(this); 
                return true;
            
         }

        });
      
      
      if(wallet_amt>0)
      {
        $(".payWalletDiv").show();
      }
      else
      {
         $(".payWalletDiv").hide();
      }
      
      $("#show_wallet_amount").html("<i class='fa fa-inr' aria-hidden='true'></i> "+wallet_amt.toFixed(2));
      $('#order_price').val(total_amt.toFixed(2));
      $('#total_order_price').html(total_amt.toFixed(2));
      $('#order_price').val(total_amt.toFixed(2));    
      $("#wallet_balance").val(wallet_amt.toFixed(2));    
      $(".radio_btn").attr('disabled', false);     
      $(".radio_btn").attr('required', true);
      $(document).on("click",".payWallet",function(e){
      
       var wallet_amt = <?php echo $bal->balance??0; ?>;
       var total_amt=<?php echo $order_dtail['order_price'];?>;
       
       $("#checkid1").val(this.checked ? "checked" : "unchecked");
       $(this).val(this.checked ? "checked" : "unchecked");
       var chk_value = jQuery(".payWallet:checked").length;
       if(chk_value>0)
        {
          if(!wallet_amt || wallet_amt == 0 && wallet_amt=='')
          {
           $('#p_error').html('You Do Not Have Sufficient Amount in Your Wallet !');
           $('#p_error').fadeIn("slow");
           $('#p_error').fadeOut(3000);
           return false;
          }
          else if(wallet_amt > 0 && total_amt >0)
          {
                  var finalAmount=0;
                  if(total_amt>wallet_amt)
                  {
                     
                      finalAmount=parseFloat(total_amt)-parseFloat(wallet_amt);
                      
                      $("#show_wallet_amount").html("<i class='fa fa-inr' aria-hidden='true'></i> "+'0.00');
                      $("#wallet_balance").val('0.00');
                      $('#order_price').val(finalAmount.toFixed(2));
                      $('#total_order_price').html(finalAmount.toFixed(2));
                      $("#amount").val(finalAmount.toFixed(2));
                      $('input[name="merchant_total"]:hidden').attr('value',Math.round(finalAmount*100));
                      $(".radio_btn").prop('disabled', false);
                      $(".radio_btn").prop("checked", false);
                      $(".radio_btn").attr('required', true);
                      
                   }
                   else if(wallet_amt>total_amt)
                   {
                        
                         finalAmount=parseFloat(wallet_amt)-parseFloat(total_amt);
                         $("#show_wallet_amount").html("<i class='fa fa-inr' aria-hidden='true'></i> "+finalAmount.toFixed(2));
                         $('#order_price').val(total_amt.toFixed(2));   
                         $('#total_order_price').html(total_amt.toFixed(2));
                         $("#wallet_balance").val(finalAmount.toFixed(2));
                         $("#amount").val(total_amt1.toFixed(2));
                         $('input[name="merchant_total"]:hidden').val(Math.round(total_amt*100));
                         $(".radio_btn").prop('disabled', true);
                         $(".radio_btn").prop("checked", true);   
                         $(".radio_btn").attr('required', false);
                   }
                    else if(total_amt==wallet_amt)
                    {
                           $(".radio_btn").prop('disabled', true);  
                           $('.radio_btn').attr('required', false);
                           $(".radio_btn").prop("checked", false);
                           $('#show_wallet_amount').html("<i class='fa fa-inr' aria-hidden='true'></i> " +'0.00');
                           $('#total_order_price').html(total_amt.toFixed(2));
                    } 
             }
        }
        else
        {
          $("#show_wallet_amount").html("<i class='fa fa-inr' aria-hidden='true'></i> "+wallet_amt.toFixed(2));
          $('#order_price').val(total_amt.toFixed(2));
          $('#total_order_price').html(total_amt.toFixed(2));
          $('#order_price').val(total_amt.toFixed(2));    
          $("#wallet_balance").val(wallet_amt.toFixed(2));
          $('input[name="merchant_total"]:hidden').val(<?php echo $total ?>);
          $("#amount").val(total_amt1.toFixed(2));
          $(".radio_btn").prop('disabled', false);
          $(".radio_btn").prop("checked", false);
          $(".radio_btn").attr('required', true);
        }
      });
      
      });
   </script>